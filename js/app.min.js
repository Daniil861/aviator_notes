(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",30),document.querySelector(".check")&&document.querySelectorAll(".check").forEach((e=>{e.textContent=sessionStorage.getItem("money")})),document.querySelector(".game")&&(+sessionStorage.getItem("money")>=5?(sessionStorage.setItem("current-bet",5),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):(sessionStorage.setItem("current-bet",0),document.querySelector(".block-bet__coins").textContent=0));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper");document.documentElement.clientWidth,document.documentElement.clientHeight;function s(e,t){let o=+sessionStorage.getItem("money");sessionStorage.setItem("money",o-e),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.add("_delete-money"))),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money")))}),500),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_delete-money")))}),1900)}function c(e,t,o){document.querySelectorAll(e).forEach((e=>e.classList.remove(t))),o.classList.add(t)}function r(e){document.querySelectorAll(e).forEach((e=>e.classList.add("_no-money"))),setTimeout((()=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("_no-money")))}),1400)}function n(e,t){return Math.floor(Math.random()*(t-e)+e)}function l(e,t){return(Math.random()*(t-e)+e).toFixed(2)}let i=document.querySelectorAll(".icon-anim img");document.querySelector(".icon-anim img")&&setInterval((()=>{!function(){let e=n(0,3),t=["jump","scale","rotate"],o=n(0,i.length);i.forEach((e=>{e.classList.contains("_anim-icon-jump")?e.classList.remove("_anim-icon-jump"):e.classList.contains("_anim-icon-scale")?e.classList.remove("_anim-icon-scale"):e.classList.contains("_anim-icon-rotate")&&e.classList.remove("_anim-icon-rotate")})),setTimeout((()=>{i[o].classList.add(`_anim-icon-${t[e]}`)}),100)}()}),2e4);const a=3500,u=4500,d=5500;function m(){document.querySelector('[data-price="1"]').textContent=a,document.querySelector('[data-price="2"]').textContent=u,document.querySelector('[data-price="3"]').textContent=d}function _(){sessionStorage.getItem("airplane-2")&&(document.querySelector('[data-shop-button="2"] p').textContent="select",document.querySelector('[data-shop-button="2"]').classList.add("_bought")),sessionStorage.getItem("airplane-3")&&(document.querySelector('[data-shop-button="3"] p').textContent="select",document.querySelector('[data-shop-button="3"]').classList.add("_bought"))}document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),m(),_());const f={state:1,height_field:!!document.querySelector(".game")&&document.querySelector(".field__body").clientHeight,current_win:0,current_coeff:0,start_coeff:0,coeff_up:.01,speed_up:.3,speed_right:.4,timerId:!1,timerCoeff:!1,timerDraw:!1},h={width:0,height:0,color_line:0};function y(){f.state=2,f.current_coeff=+l(1.1,function(){let e=+n(1,10);if(e>0&&e<=3)return 2;if(e>3&&e<=7)return 3;if(e>7)return 5}()),s(+sessionStorage.getItem("current-bet"),".check"),document.querySelector(".field__circle svg").classList.add("_rotate"),f.speed_up=+l(.11,.25),f.speed_right=+l(.4,.7),h.color_line=`${n(0,255)},${n(0,255)},${n(0,255)}`,function(){let e=0,t=0,o=-5,s=document.querySelector(".field__airplane");(function(){let e=document.querySelector(".field__pin"),t=document.querySelector(".ctx").getContext("2d");f.timerDraw=setInterval((()=>{3==f.state&&setTimeout((()=>{clearInterval(f.timerDraw)}),800);let o=e.getBoundingClientRect().left-40,s=e.getBoundingClientRect().top-30;t.clearRect(0,0,h.width,h.height),function(e,t,o,s,c,r,n){let l=document.querySelector(".ctx").getContext("2d");l.lineWidth=c;let i=l.createLinearGradient(0,h.height,e,t);i.addColorStop(0,`rgba(${o},0.1)`),i.addColorStop(1,`rgba(${o},1)`),l.strokeStyle=i,l.beginPath(),l.moveTo(s,h.height),l.quadraticCurveTo(e-r,t+n,e,t),l.stroke()}(o,s,h.color_line,0,"3",10,15)}),50)})(),f.timerId=setInterval((()=>{t<=15?e+=f.speed_up:t>15&&t<=30?e+=1.5*f.speed_up:t>30&&t<=45?e+=2*f.speed_up:t>45&&(e+=4*f.speed_up),t+=f.speed_right,o>=-20&&(o-=.2),s.style.bottom=`${e}%`,s.style.left=`${t}%`,s.style.transform=`rotate(${o}deg)`,f.start_coeff>=f.current_coeff&&(s.style.transition="all 2s ease 0s",s.style.left="150%",s.style.bottom="110%",f.state=3,S(),document.querySelector(".footer__button-cash").classList.add("_loose"),document.querySelector(".footer__button-bet").classList.add("_loose"),document.querySelector(".footer__button-cash").classList.add("_hold"),setTimeout((()=>{document.querySelector(".ctx").getContext("2d").clearRect(0,0,h.width,h.height),g()}),2e3))}),35)}(),f.timerCoeff=setInterval((()=>{f.start_coeff+=f.coeff_up,document.querySelector(".field__coeff").textContent=`${f.start_coeff.toFixed(2)}x`,function(){let e=+sessionStorage.getItem("current-bet");f.current_win=Math.floor(e*f.start_coeff),document.querySelector(".footer__current-count").textContent=f.current_win}()}),10)}function S(){clearInterval(f.timerId),clearInterval(f.timerCoeff)}function g(){let e=document.querySelector(".field__airplane");f.current_win=0,f.start_coeff=0,f.state=1,e.style.transition="none",e.style.left="2%",e.style.bottom="7%",e.style.transform="rotate(-5deg)",document.querySelector(".footer__current-count").textContent=0,document.querySelector(".field__coeff").textContent="0x",document.querySelector(".footer__button-cash").classList.contains("_loose")&&document.querySelector(".footer__button-cash").classList.remove("_loose"),document.querySelector(".footer__button-bet").classList.contains("_loose")&&document.querySelector(".footer__button-bet").classList.remove("_loose"),document.querySelector(".field__circle svg").classList.contains("_rotate")&&document.querySelector(".field__circle svg").classList.remove("_rotate"),document.querySelector(".field__body").classList.add("_loader"),setTimeout((()=>{document.querySelector(".field__body").classList.remove("_loader"),document.querySelector(".footer__bet-box").classList.contains("_hold")&&document.querySelector(".footer__bet-box").classList.remove("_hold"),document.querySelector(".footer__button-cash").classList.contains("_hold")&&document.querySelector(".footer__button-cash").classList.remove("_hold")}),5e3)}document.querySelector(".game")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".field__airplane img").setAttribute("src",`img/game/airplane-${sessionStorage.getItem("current-airplane")}.svg`),function(){let e=document.querySelector(".field__circle circle"),t=document.querySelector(".field__circle svg");e.setAttribute("r",4*f.height_field),e.setAttribute("stroke-width",8*f.height_field),t.setAttribute("width",8*f.height_field),t.setAttribute("height",8*f.height_field),document.querySelector(".field__circle").style.left=`-${4*f.height_field}px`,document.querySelector(".field__circle").style.bottom=3*f.height_field+"px"}(),function(){let e=document.querySelector(".ctx"),t=document.querySelector(".field__body");h.width=t.clientWidth,h.height=t.clientHeight,e.setAttribute("width",`${h.width}px`),e.setAttribute("height",`${h.height}px`)}()),document.addEventListener("click",(e=>{let n=e.target,l=+sessionStorage.getItem("money"),i=+sessionStorage.getItem("current-bet");n.closest(".preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible"),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),m(),sessionStorage.getItem("current-airplane")||sessionStorage.setItem("current-airplane",1))),n.closest(".main__button_shop")&&document.querySelector(".main__body").classList.add("_shop"),n.closest(".main__button-back")&&document.querySelector(".main__body").classList.remove("_shop"),n.closest('[data-shop-button="1"]')&&(c(".shop__item","_selected",document.querySelectorAll(".shop__item")[0]),sessionStorage.setItem("current-airplane",1)),n.closest('[data-shop-button="2"]')&&!n.closest('[data-shop-button="2"]').classList.contains("_bought")?l>=u?(s(u,".check"),sessionStorage.setItem("airplane-2",!0),_()):r(".check"):n.closest('[data-shop-button="2"]')&&n.closest('[data-shop-button="2"]').classList.contains("_bought")&&(c(".shop__item","_selected",document.querySelectorAll(".shop__item")[1]),sessionStorage.setItem("current-airplane",2)),n.closest('[data-shop-button="3"]')&&!n.closest('[data-shop-button="3"]').classList.contains("_bought")?l>=d?(s(d,".check"),sessionStorage.setItem("airplane-3",!0),_()):r(".check"):n.closest('[data-shop-button="3"]')&&n.closest('[data-shop-button="3"]').classList.contains("_bought")&&(c(".shop__item","_selected",document.querySelectorAll(".shop__item")[2]),sessionStorage.setItem("current-airplane",3)),n.closest(".block-bet__minus")&&i>5&&(sessionStorage.setItem("current-bet",i-5),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")),n.closest(".block-bet__plus")&&(l-4>i?(sessionStorage.setItem("current-bet",i+5),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):r(".check")),n.closest('[data-footer-button="bet"]')&&(n.closest('[data-footer-button="bet"]').classList.contains("_active")||c(".footer__button","_active",n.closest('[data-footer-button="bet"]'))),n.closest('[data-footer-button="auto"]')&&(c(".footer__button","_active",n.closest('[data-footer-button="auto"]')),document.querySelector(".footer__bet-box").classList.add("_hold")),n.closest(".footer__button-bet")&&(document.querySelector(".footer__bet-box").classList.add("_hold"),y()),n.closest(".footer__button-cash")&&2==f.state&&(S(),f.state=3,document.querySelector(".footer__button-cash").classList.add("_hold"),setTimeout((()=>{g()}),2e3),function(e,t,o,s){let c=Math.floor(+sessionStorage.getItem("money")+e);setTimeout((()=>{sessionStorage.setItem("money",c),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money"))),document.querySelectorAll(t).forEach((e=>e.classList.add("_anim-add-money")))}),o),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_anim-add-money")))}),s)}(f.current_win,".check",1e3,2e3))})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)}))})();