(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",30),document.querySelector(".check")&&document.querySelectorAll(".check").forEach((e=>{e.textContent=sessionStorage.getItem("money")})),document.querySelector(".game")&&(+sessionStorage.getItem("money")>=5?(sessionStorage.setItem("current-bet",5),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):(sessionStorage.setItem("current-bet",0),document.querySelector(".block-bet__coins").textContent=0));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper"),s=(document.documentElement.clientWidth,document.documentElement.clientHeight);function c(e,t){let o=+sessionStorage.getItem("money");sessionStorage.setItem("money",o-e),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.add("_delete-money"))),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money")))}),500),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_delete-money")))}),1900)}function r(e,t,o){document.querySelectorAll(e).forEach((e=>e.classList.remove(t))),o.classList.add(t)}function n(e){document.querySelectorAll(e).forEach((e=>e.classList.add("_no-money"))),setTimeout((()=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("_no-money")))}),1400)}function l(e,t){return Math.floor(Math.random()*(t-e)+e)}function a(e,t){return(Math.random()*(t-e)+e).toFixed(2)}let i=document.querySelectorAll(".icon-anim img");document.querySelector(".icon-anim img")&&setInterval((()=>{!function(){let e=l(0,3),t=["jump","scale","rotate"],o=l(0,i.length);i.forEach((e=>{e.classList.contains("_anim-icon-jump")?e.classList.remove("_anim-icon-jump"):e.classList.contains("_anim-icon-scale")?e.classList.remove("_anim-icon-scale"):e.classList.contains("_anim-icon-rotate")&&e.classList.remove("_anim-icon-rotate")})),setTimeout((()=>{i[o].classList.add(`_anim-icon-${t[e]}`)}),100)}()}),2e4);const u=25,d=60;function m(){document.querySelector('[data-price="2"]').textContent=u,document.querySelector('[data-price="3"]').textContent=d}function _(){sessionStorage.getItem("airplane-2")&&(document.querySelector('[data-shop-button="2"] p').textContent="select",document.querySelector('[data-shop-button="2"]').classList.add("_bought"),document.querySelector('[data-airplane="2"]').classList.add("_bought")),sessionStorage.getItem("airplane-3")&&(document.querySelector('[data-shop-button="3"] p').textContent="select",document.querySelector('[data-shop-button="3"]').classList.add("_bought"),document.querySelector('[data-airplane="3"]').classList.add("_bought"))}function f(){sessionStorage.getItem("current-airplane")||sessionStorage.setItem("current-airplane",1)}document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),m(),f(),_(),function(){let e=+sessionStorage.getItem("current-airplane");r(".shop__item","_selected",document.querySelectorAll(".shop__item")[e-1])}());const y={state:1,height_field:!!document.querySelector(".game")&&document.querySelector(".field__body").clientHeight,current_win:0,current_coeff:0,start_coeff:0,coeff_up:.01,speed_up:.2,speed_right:.4,timerId:!1,timerCoeff:!1,timerDraw:!1},h={width:0,height:0,color_line:0};function S(){y.state=2,y.current_coeff=+a(1.1,function(){let e=+l(1,10);if(e>0&&e<=3)return 2;if(e>3&&e<=7)return 3;if(e>7)return 5}()),c(+sessionStorage.getItem("current-bet"),".check"),document.querySelector(".field__circle svg").classList.add("_rotate"),y.speed_up=+a(.11,.25),y.speed_right=+a(.4,.7),h.color_line=`${l(0,255)},${l(0,255)},${l(0,255)}`,function(){let e=7,t=2,o=-5,s=document.querySelector(".field__airplane");(function(){let e=document.querySelector(".field__pin"),t=document.querySelector(".ctx").getContext("2d");y.timerDraw=setInterval((()=>{3==y.state&&setTimeout((()=>{clearInterval(y.timerDraw)}),800);let o=e.getBoundingClientRect().left-40,s=e.getBoundingClientRect().top-30;t.clearRect(0,0,h.width,h.height),function(e,t,o,s,c,r,n){let l=document.querySelector(".ctx").getContext("2d");l.lineWidth=c;let a=l.createLinearGradient(0,h.height,e,t);a.addColorStop(0,`rgba(${o},0.1)`),a.addColorStop(1,`rgba(${o},1)`),l.strokeStyle=a,l.beginPath(),l.moveTo(s,h.height),l.quadraticCurveTo(e-r,t+n,e,t),l.stroke()}(o,s,h.color_line,0,"4",10,15)}),50)})(),y.timerId=setInterval((()=>{t<=15?e+=y.speed_up:t>15&&t<=30?e+=1.5*y.speed_up:t>30&&t<=45?e+=2*y.speed_up:t>45&&(e+=4*y.speed_up),t+=y.speed_right,o>=-20&&(o-=.2),s.style.bottom=`${e}%`,s.style.left=`${t}%`,s.style.transform=`rotate(${o}deg)`,(t>=70||e>=70)&&(clearInterval(y.timerId),s.style.transition="all 1s ease 0s",s.style.transform="rotate(-5deg)",document.querySelector(".field__body").classList.add("_fly"))}),35)}(),y.timerCoeff=setInterval((()=>{y.start_coeff+=y.coeff_up,document.querySelector(".field__coeff").textContent=`${y.start_coeff.toFixed(2)}x`,function(){let e=+sessionStorage.getItem("current-bet");y.current_win=Math.floor(e*y.start_coeff),document.querySelector(".footer__current-count").textContent=y.current_win}(),y.start_coeff>=y.current_coeff&&(function(){let e=document.querySelector(".field__airplane");e.style.transition="all 2s ease 0s",e.style.left="150%",e.style.bottom="110%"}(),y.state=3,b(),document.querySelector(".footer__button-cash").classList.add("_loose"),document.querySelector(".footer__button-bet").classList.add("_loose"),document.querySelector(".footer__button-cash").classList.add("_hold"),setTimeout((()=>{p()}),2e3))}),20),console.log(y.current_coeff)}function g(){let e=function(){let e=l(5,+sessionStorage.getItem("money"));e%5!=0&&(e-=e%5);return e}();setTimeout((()=>{sessionStorage.setItem("current-bet",e),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")}),500),setTimeout((()=>{S()}),1500)}function b(){clearInterval(y.timerId),clearInterval(y.timerCoeff)}function p(){let e=document.querySelector(".field__airplane");y.current_win=0,y.start_coeff=0,y.state=1,e.style.transition="none",e.style.left="2%",e.style.bottom="7%",e.style.transform="rotate(-5deg)",document.querySelector(".footer__current-count").textContent=0,document.querySelector(".field__coeff").textContent="0x",document.querySelector(".footer__button-cash").classList.contains("_loose")&&document.querySelector(".footer__button-cash").classList.remove("_loose"),document.querySelector(".footer__button-bet").classList.contains("_loose")&&document.querySelector(".footer__button-bet").classList.remove("_loose"),document.querySelector(".field__circle svg").classList.contains("_rotate")&&document.querySelector(".field__circle svg").classList.remove("_rotate"),document.querySelector(".ctx").getContext("2d").clearRect(0,0,h.width,h.height),document.querySelector(".field__body").classList.add("_loader"),document.querySelector(".field__body").classList.contains("_fly")&&document.querySelector(".field__body").classList.remove("_fly"),setTimeout((()=>{document.querySelector(".field__body").classList.remove("_loader"),document.querySelector(".footer__bet-box").classList.contains("_hold")&&document.querySelector(".footer__bet-box").classList.remove("_hold"),document.querySelector(".footer__button-cash").classList.contains("_hold")&&document.querySelector(".footer__button-cash").classList.remove("_hold"),r(".footer__button","_active",document.querySelector('[data-footer-button="bet"]'))}),5e3)}if(document.querySelector(".game")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".field__airplane img").setAttribute("src",`img/game/airplane-${sessionStorage.getItem("current-airplane")}.svg`),function(){let e=document.querySelector(".field__circle circle"),t=document.querySelector(".field__circle svg");e.setAttribute("r",4*y.height_field),e.setAttribute("stroke-width",8*y.height_field),t.setAttribute("width",8*y.height_field),t.setAttribute("height",8*y.height_field),document.querySelector(".field__circle").style.left=`-${4*y.height_field}px`,document.querySelector(".field__circle").style.bottom=3*y.height_field+"px",s>=600&&e.setAttribute("stroke-dasharray",300)}(),function(){let e=document.querySelector(".ctx"),t=document.querySelector(".field__body");h.width=t.clientWidth,h.height=t.clientHeight,e.setAttribute("width",`${h.width}px`),e.setAttribute("height",`${h.height}px`)}()),document.querySelector(".main")){const e=document.querySelector(".audio_main");e.preload="auto",e.volume=[.3],document.addEventListener("click",(t=>{let o=t.target;o.closest(".volume")&&(o.closest(".volume")&&!o.closest(".volume").classList.contains("_hide")?e.pause():o.closest(".volume")&&o.closest(".volume").classList.contains("_hide")&&e.play(),o.closest(".volume").classList.toggle("_hide"))}))}if(document.querySelector(".game")){const e=document.querySelector(".audio_game");e.preload="auto",e.volume=[.3],document.addEventListener("click",(t=>{let o=t.target;o.closest(".volume")&&(o.closest(".volume")&&!o.closest(".volume").classList.contains("_hide")?e.pause():o.closest(".volume")&&o.closest(".volume").classList.contains("_hide")&&e.play(),o.closest(".volume").classList.toggle("_hide"))}))}document.addEventListener("click",(e=>{let s=e.target,l=+sessionStorage.getItem("money"),a=+sessionStorage.getItem("current-bet");s.closest(".preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible"),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),m(),f())),s.closest(".main__button_shop")&&document.querySelector(".main__body").classList.add("_shop"),s.closest(".main__button-back")&&document.querySelector(".main__body").classList.remove("_shop"),s.closest('[data-shop-button="1"]')&&(r(".shop__item","_selected",document.querySelectorAll(".shop__item")[0]),sessionStorage.setItem("current-airplane",1)),s.closest('[data-shop-button="2"]')&&!s.closest('[data-shop-button="2"]').classList.contains("_bought")?l>=u?(c(u,".check"),sessionStorage.setItem("airplane-2",!0),_()):n(".check"):s.closest('[data-shop-button="2"]')&&s.closest('[data-shop-button="2"]').classList.contains("_bought")&&(r(".shop__item","_selected",document.querySelectorAll(".shop__item")[1]),sessionStorage.setItem("current-airplane",2)),s.closest('[data-shop-button="3"]')&&!s.closest('[data-shop-button="3"]').classList.contains("_bought")?l>=d?(c(d,".check"),sessionStorage.setItem("airplane-3",!0),_()):n(".check"):s.closest('[data-shop-button="3"]')&&s.closest('[data-shop-button="3"]').classList.contains("_bought")&&(r(".shop__item","_selected",document.querySelectorAll(".shop__item")[2]),sessionStorage.setItem("current-airplane",3)),s.closest(".block-bet__minus")&&a>5&&(sessionStorage.setItem("current-bet",a-5),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")),s.closest(".block-bet__plus")&&(l-4>a?(sessionStorage.setItem("current-bet",a+5),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):n(".check")),s.closest('[data-footer-button="bet"]')&&(s.closest('[data-footer-button="bet"]').classList.contains("_active")||r(".footer__button","_active",s.closest('[data-footer-button="bet"]'))),s.closest('[data-footer-button="auto"]')&&(r(".footer__button","_active",s.closest('[data-footer-button="auto"]')),document.querySelector(".footer__bet-box").classList.add("_hold"),g()),s.closest(".footer__button-bet")&&(document.querySelector(".footer__bet-box").classList.add("_hold"),S()),s.closest(".footer__button-cash")&&2==y.state&&(b(),y.state=3,document.querySelector(".footer__button-cash").classList.add("_hold"),setTimeout((()=>{p()}),2e3),function(e,t,o,s){let c=Math.floor(+sessionStorage.getItem("money")+e);setTimeout((()=>{sessionStorage.setItem("money",c),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money"))),document.querySelectorAll(t).forEach((e=>e.classList.add("_anim-add-money")))}),o),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_anim-add-money")))}),s)}(y.current_win,".check",1e3,2e3))})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)}))})();